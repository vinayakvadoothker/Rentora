{"ast":null,"code":"import \"../chunk-3W5G4CYI.js\";\nimport { deprecated } from \"@clerk/shared/deprecated\";\nimport React from \"react\";\nimport IsomorphicClerk from \"../isomorphicClerk\";\nimport { deriveState } from \"../utils/deriveState\";\nimport { AuthContext } from \"./AuthContext\";\nimport { ClientContext } from \"./ClientContext\";\nimport { IsomorphicClerkContext } from \"./IsomorphicClerkContext\";\nimport { OrganizationProvider } from \"./OrganizationContext\";\nimport { SessionContext } from \"./SessionContext\";\nimport { UserContext } from \"./UserContext\";\nfunction ClerkContextProvider(props) {\n  const {\n    isomorphicClerkOptions,\n    initialState,\n    children\n  } = props;\n  const {\n    isomorphicClerk: clerk,\n    loaded: clerkLoaded\n  } = useLoadedIsomorphicClerk(isomorphicClerkOptions);\n  if (isomorphicClerkOptions.frontendApi) {\n    deprecated(\"frontendApi\", \"Use `publishableKey` instead.\");\n  }\n  const [state, setState] = React.useState({\n    client: clerk.client,\n    session: clerk.session,\n    user: clerk.user,\n    organization: clerk.organization,\n    lastOrganizationInvitation: null,\n    lastOrganizationMember: null\n  });\n  React.useEffect(() => {\n    return clerk.addListener(e => setState({\n      ...e\n    }));\n  }, []);\n  const derivedState = deriveState(clerkLoaded, state, initialState);\n  const clerkCtx = React.useMemo(() => ({\n    value: clerk\n  }), [clerkLoaded]);\n  const clientCtx = React.useMemo(() => ({\n    value: state.client\n  }), [state.client]);\n  const {\n    sessionId,\n    session,\n    userId,\n    user,\n    orgId,\n    actor,\n    lastOrganizationInvitation,\n    lastOrganizationMember,\n    organization,\n    orgRole,\n    orgSlug\n  } = derivedState;\n  const authCtx = React.useMemo(() => {\n    const value = {\n      sessionId,\n      userId,\n      actor,\n      orgId,\n      orgRole,\n      orgSlug\n    };\n    return {\n      value\n    };\n  }, [sessionId, userId, actor, orgId, orgRole, orgSlug]);\n  const userCtx = React.useMemo(() => ({\n    value: user\n  }), [userId, user]);\n  const sessionCtx = React.useMemo(() => ({\n    value: session\n  }), [sessionId, session]);\n  const organizationCtx = React.useMemo(() => {\n    const value = {\n      organization,\n      lastOrganizationInvitation,\n      lastOrganizationMember\n    };\n    return {\n      value\n    };\n  }, [orgId, organization, lastOrganizationInvitation, lastOrganizationMember]);\n  return (\n    // @ts-expect-error\n    /* @__PURE__ */\n    React.createElement(IsomorphicClerkContext.Provider, {\n      value: clerkCtx\n    }, /* @__PURE__ */React.createElement(ClientContext.Provider, {\n      value: clientCtx\n    }, /* @__PURE__ */React.createElement(SessionContext.Provider, {\n      value: sessionCtx\n    }, /* @__PURE__ */React.createElement(OrganizationProvider, {\n      ...organizationCtx.value\n    }, /* @__PURE__ */React.createElement(AuthContext.Provider, {\n      value: authCtx\n    }, /* @__PURE__ */React.createElement(UserContext.Provider, {\n      value: userCtx\n    }, children))))))\n  );\n}\nconst useLoadedIsomorphicClerk = options => {\n  const [loaded, setLoaded] = React.useState(false);\n  const isomorphicClerk = React.useMemo(() => IsomorphicClerk.getOrCreateInstance(options), []);\n  React.useEffect(() => {\n    isomorphicClerk.__unstable__updateProps({\n      appearance: options.appearance\n    });\n  }, [options.appearance]);\n  React.useEffect(() => {\n    isomorphicClerk.__unstable__updateProps({\n      options\n    });\n  }, [options.localization]);\n  React.useEffect(() => {\n    isomorphicClerk.addOnLoaded(() => setLoaded(true));\n  }, []);\n  return {\n    isomorphicClerk,\n    loaded\n  };\n};\nexport { ClerkContextProvider };","map":{"version":3,"names":["deprecated","React","IsomorphicClerk","deriveState","AuthContext","ClientContext","IsomorphicClerkContext","OrganizationProvider","SessionContext","UserContext","ClerkContextProvider","props","isomorphicClerkOptions","initialState","children","isomorphicClerk","clerk","loaded","clerkLoaded","useLoadedIsomorphicClerk","frontendApi","state","setState","useState","client","session","user","organization","lastOrganizationInvitation","lastOrganizationMember","useEffect","addListener","e","derivedState","clerkCtx","useMemo","value","clientCtx","sessionId","userId","orgId","actor","orgRole","orgSlug","authCtx","userCtx","sessionCtx","organizationCtx","createElement","Provider","options","setLoaded","getOrCreateInstance","__unstable__updateProps","appearance","localization","addOnLoaded"],"sources":["/Users/vvadooth/node_modules/@clerk/clerk-react/src/contexts/ClerkContextProvider.tsx"],"sourcesContent":["import { deprecated } from '@clerk/shared/deprecated';\nimport type { ClientResource, InitialState, Resources } from '@clerk/types';\nimport React from 'react';\n\nimport IsomorphicClerk from '../isomorphicClerk';\nimport type { IsomorphicClerkOptions } from '../types';\nimport { deriveState } from '../utils/deriveState';\nimport { AuthContext } from './AuthContext';\nimport { ClientContext } from './ClientContext';\nimport { IsomorphicClerkContext } from './IsomorphicClerkContext';\nimport { OrganizationProvider } from './OrganizationContext';\nimport { SessionContext } from './SessionContext';\nimport { UserContext } from './UserContext';\n\ntype ClerkContextProvider = {\n  isomorphicClerkOptions: IsomorphicClerkOptions;\n  initialState: InitialState | undefined;\n  children: React.ReactNode;\n};\n\nexport type ClerkContextProviderState = Resources;\n\nexport function ClerkContextProvider(props: ClerkContextProvider): JSX.Element | null {\n  const { isomorphicClerkOptions, initialState, children } = props;\n  const { isomorphicClerk: clerk, loaded: clerkLoaded } = useLoadedIsomorphicClerk(isomorphicClerkOptions);\n\n  if (isomorphicClerkOptions.frontendApi) {\n    deprecated('frontendApi', 'Use `publishableKey` instead.');\n  }\n\n  const [state, setState] = React.useState<ClerkContextProviderState>({\n    client: clerk.client as ClientResource,\n    session: clerk.session,\n    user: clerk.user,\n    organization: clerk.organization,\n    lastOrganizationInvitation: null,\n    lastOrganizationMember: null,\n  });\n\n  React.useEffect(() => {\n    return clerk.addListener(e => setState({ ...e }));\n  }, []);\n\n  const derivedState = deriveState(clerkLoaded, state, initialState);\n  const clerkCtx = React.useMemo(() => ({ value: clerk }), [clerkLoaded]);\n  const clientCtx = React.useMemo(() => ({ value: state.client }), [state.client]);\n\n  const {\n    sessionId,\n    session,\n    userId,\n    user,\n    orgId,\n    actor,\n    lastOrganizationInvitation,\n    lastOrganizationMember,\n    organization,\n    orgRole,\n    orgSlug,\n  } = derivedState;\n\n  const authCtx = React.useMemo(() => {\n    const value = { sessionId, userId, actor, orgId, orgRole, orgSlug };\n    return { value };\n  }, [sessionId, userId, actor, orgId, orgRole, orgSlug]);\n  const userCtx = React.useMemo(() => ({ value: user }), [userId, user]);\n  const sessionCtx = React.useMemo(() => ({ value: session }), [sessionId, session]);\n  const organizationCtx = React.useMemo(() => {\n    const value = {\n      organization: organization,\n      lastOrganizationInvitation: lastOrganizationInvitation,\n      lastOrganizationMember: lastOrganizationMember,\n    };\n    return { value };\n  }, [orgId, organization, lastOrganizationInvitation, lastOrganizationMember]);\n\n  return (\n    // @ts-expect-error\n    <IsomorphicClerkContext.Provider value={clerkCtx}>\n      <ClientContext.Provider value={clientCtx}>\n        <SessionContext.Provider value={sessionCtx}>\n          <OrganizationProvider {...organizationCtx.value}>\n            <AuthContext.Provider value={authCtx}>\n              <UserContext.Provider value={userCtx}>{children}</UserContext.Provider>\n            </AuthContext.Provider>\n          </OrganizationProvider>\n        </SessionContext.Provider>\n      </ClientContext.Provider>\n    </IsomorphicClerkContext.Provider>\n  );\n}\n\nconst useLoadedIsomorphicClerk = (options: IsomorphicClerkOptions) => {\n  const [loaded, setLoaded] = React.useState(false);\n  const isomorphicClerk = React.useMemo(() => IsomorphicClerk.getOrCreateInstance(options), []);\n\n  React.useEffect(() => {\n    isomorphicClerk.__unstable__updateProps({ appearance: options.appearance });\n  }, [options.appearance]);\n\n  React.useEffect(() => {\n    isomorphicClerk.__unstable__updateProps({ options });\n  }, [options.localization]);\n\n  React.useEffect(() => {\n    isomorphicClerk.addOnLoaded(() => setLoaded(true));\n  }, []);\n\n  return { isomorphicClerk, loaded };\n};\n"],"mappings":";AAAA,SAASA,UAAA,QAAkB;AAE3B,OAAOC,KAAA,MAAW;AAElB,OAAOC,eAAA,MAAqB;AAE5B,SAASC,WAAA,QAAmB;AAC5B,SAASC,WAAA,QAAmB;AAC5B,SAASC,aAAA,QAAqB;AAC9B,SAASC,sBAAA,QAA8B;AACvC,SAASC,oBAAA,QAA4B;AACrC,SAASC,cAAA,QAAsB;AAC/B,SAASC,WAAA,QAAmB;AAUrB,SAASC,qBAAqBC,KAAA,EAAiD;EACpF,MAAM;IAAEC,sBAAA;IAAwBC,YAAA;IAAcC;EAAS,IAAIH,KAAA;EAC3D,MAAM;IAAEI,eAAA,EAAiBC,KAAA;IAAOC,MAAA,EAAQC;EAAY,IAAIC,wBAAA,CAAyBP,sBAAsB;EAEvG,IAAIA,sBAAA,CAAuBQ,WAAA,EAAa;IACtCpB,UAAA,CAAW,eAAe,+BAA+B;EAC3D;EAEA,MAAM,CAACqB,KAAA,EAAOC,QAAQ,IAAIrB,KAAA,CAAMsB,QAAA,CAAoC;IAClEC,MAAA,EAAQR,KAAA,CAAMQ,MAAA;IACdC,OAAA,EAAST,KAAA,CAAMS,OAAA;IACfC,IAAA,EAAMV,KAAA,CAAMU,IAAA;IACZC,YAAA,EAAcX,KAAA,CAAMW,YAAA;IACpBC,0BAAA,EAA4B;IAC5BC,sBAAA,EAAwB;EAC1B,CAAC;EAED5B,KAAA,CAAM6B,SAAA,CAAU,MAAM;IACpB,OAAOd,KAAA,CAAMe,WAAA,CAAYC,CAAA,IAAKV,QAAA,CAAS;MAAE,GAAGU;IAAE,CAAC,CAAC;EAClD,GAAG,EAAE;EAEL,MAAMC,YAAA,GAAe9B,WAAA,CAAYe,WAAA,EAAaG,KAAA,EAAOR,YAAY;EACjE,MAAMqB,QAAA,GAAWjC,KAAA,CAAMkC,OAAA,CAAQ,OAAO;IAAEC,KAAA,EAAOpB;EAAM,IAAI,CAACE,WAAW,CAAC;EACtE,MAAMmB,SAAA,GAAYpC,KAAA,CAAMkC,OAAA,CAAQ,OAAO;IAAEC,KAAA,EAAOf,KAAA,CAAMG;EAAO,IAAI,CAACH,KAAA,CAAMG,MAAM,CAAC;EAE/E,MAAM;IACJc,SAAA;IACAb,OAAA;IACAc,MAAA;IACAb,IAAA;IACAc,KAAA;IACAC,KAAA;IACAb,0BAAA;IACAC,sBAAA;IACAF,YAAA;IACAe,OAAA;IACAC;EACF,IAAIV,YAAA;EAEJ,MAAMW,OAAA,GAAU3C,KAAA,CAAMkC,OAAA,CAAQ,MAAM;IAClC,MAAMC,KAAA,GAAQ;MAAEE,SAAA;MAAWC,MAAA;MAAQE,KAAA;MAAOD,KAAA;MAAOE,OAAA;MAASC;IAAQ;IAClE,OAAO;MAAEP;IAAM;EACjB,GAAG,CAACE,SAAA,EAAWC,MAAA,EAAQE,KAAA,EAAOD,KAAA,EAAOE,OAAA,EAASC,OAAO,CAAC;EACtD,MAAME,OAAA,GAAU5C,KAAA,CAAMkC,OAAA,CAAQ,OAAO;IAAEC,KAAA,EAAOV;EAAK,IAAI,CAACa,MAAA,EAAQb,IAAI,CAAC;EACrE,MAAMoB,UAAA,GAAa7C,KAAA,CAAMkC,OAAA,CAAQ,OAAO;IAAEC,KAAA,EAAOX;EAAQ,IAAI,CAACa,SAAA,EAAWb,OAAO,CAAC;EACjF,MAAMsB,eAAA,GAAkB9C,KAAA,CAAMkC,OAAA,CAAQ,MAAM;IAC1C,MAAMC,KAAA,GAAQ;MACZT,YAAA;MACAC,0BAAA;MACAC;IACF;IACA,OAAO;MAAEO;IAAM;EACjB,GAAG,CAACI,KAAA,EAAOb,YAAA,EAAcC,0BAAA,EAA4BC,sBAAsB,CAAC;EAE5E;IAAA;IAEE;IAAA5B,KAAA,CAAA+C,aAAA,CAAC1C,sBAAA,CAAuB2C,QAAA,EAAvB;MAAgCb,KAAA,EAAOF;IAAA,GACtC,eAAAjC,KAAA,CAAA+C,aAAA,CAAC3C,aAAA,CAAc4C,QAAA,EAAd;MAAuBb,KAAA,EAAOC;IAAA,GAC7B,eAAApC,KAAA,CAAA+C,aAAA,CAACxC,cAAA,CAAeyC,QAAA,EAAf;MAAwBb,KAAA,EAAOU;IAAA,GAC9B,eAAA7C,KAAA,CAAA+C,aAAA,CAACzC,oBAAA;MAAsB,GAAGwC,eAAA,CAAgBX;IAAA,GACxC,eAAAnC,KAAA,CAAA+C,aAAA,CAAC5C,WAAA,CAAY6C,QAAA,EAAZ;MAAqBb,KAAA,EAAOQ;IAAA,GAC3B,eAAA3C,KAAA,CAAA+C,aAAA,CAACvC,WAAA,CAAYwC,QAAA,EAAZ;MAAqBb,KAAA,EAAOS;IAAA,GAAU/B,QAAS,CAClD,CACF,CACF,CACF,CACF;EAAA;AAEJ;AAEA,MAAMK,wBAAA,GAA4B+B,OAAA,IAAoC;EACpE,MAAM,CAACjC,MAAA,EAAQkC,SAAS,IAAIlD,KAAA,CAAMsB,QAAA,CAAS,KAAK;EAChD,MAAMR,eAAA,GAAkBd,KAAA,CAAMkC,OAAA,CAAQ,MAAMjC,eAAA,CAAgBkD,mBAAA,CAAoBF,OAAO,GAAG,EAAE;EAE5FjD,KAAA,CAAM6B,SAAA,CAAU,MAAM;IACpBf,eAAA,CAAgBsC,uBAAA,CAAwB;MAAEC,UAAA,EAAYJ,OAAA,CAAQI;IAAW,CAAC;EAC5E,GAAG,CAACJ,OAAA,CAAQI,UAAU,CAAC;EAEvBrD,KAAA,CAAM6B,SAAA,CAAU,MAAM;IACpBf,eAAA,CAAgBsC,uBAAA,CAAwB;MAAEH;IAAQ,CAAC;EACrD,GAAG,CAACA,OAAA,CAAQK,YAAY,CAAC;EAEzBtD,KAAA,CAAM6B,SAAA,CAAU,MAAM;IACpBf,eAAA,CAAgByC,WAAA,CAAY,MAAML,SAAA,CAAU,IAAI,CAAC;EACnD,GAAG,EAAE;EAEL,OAAO;IAAEpC,eAAA;IAAiBE;EAAO;AACnC"},"metadata":{},"sourceType":"module","externalDependencies":[]}